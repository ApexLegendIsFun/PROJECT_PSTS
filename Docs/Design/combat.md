# Combat System

## Overview
TRIAD 기반 턴제 카드 전투 시스템. Slay the Spire 구조를 기반으로 하되 3캐릭터 개별 시스템으로 운영.

---

## Turn Structure

```
[플레이어 턴]
  캐릭터 A 행동 → 캐릭터 B 행동 → 캐릭터 C 행동
      ↓
[적 턴]
  적 전체 행동 (Intent 기반)
      ↓
[다음 라운드]
```

### 플레이어 턴
1. **턴 시작**: 각 캐릭터 에너지 회복, 드로우
2. **행동 페이즈**: A → B → C 순차 행동
3. **턴 종료**: 미사용 카드 버리기, 상태효과 처리

### 적 턴
- 모든 적이 Intent에 따라 행동
- 타겟팅: 랜덤 또는 특정 조건

---

## TRIAD System (3캐릭터 파티)

### 행동 순서
- **순차 행동**: A → B → C 고정 순서
- 각 캐릭터는 자신의 턴에 카드 사용
- 다른 캐릭터 턴에는 행동 불가

### 캐릭터 사망
- HP 0 도달 시 해당 캐릭터 행동 불가
- 남은 캐릭터만 행동 진행
- 전원 사망 시 전투 패배

---

## Deck & Draw

### 개별 덱 시스템
- 각 캐릭터가 **독립적인 덱** 보유
- 드로우/버리기/소멸 모두 개별 관리

### 드로우
- 턴 시작 시 각자 자기 덱에서 드로우
- 기본 드로우 수: `N장` (밸런스 조정 필요)

### 카드 사용 제한
- **소유자만 사용 가능**
- 캐릭터 A의 카드는 A만 사용

### 카드 풀
```
Draw Pile (드로우 더미)
     ↓ 드로우
   Hand (패)
     ↓ 사용/버리기
Discard Pile (버린 더미)
     ↓ 덱 소진 시 셔플
Draw Pile
```

---

## Energy System

### 개별 에너지
- 각 캐릭터가 **독립적인 에너지** 보유
- 기본 에너지: `N` (밸런스 조정 필요)

### 에너지 회복
- 매 턴 시작 시 최대치로 회복
- 미사용 에너지는 소멸 (기본)

### 에너지 사용
- 카드 비용만큼 차감
- 에너지 부족 시 카드 사용 불가

---

## HP & Death

### 개별 HP
- 각 캐릭터가 **독립적인 HP** 보유
- 최대 HP, 현재 HP 별도 관리

### Block (방어도)
- 턴 종료 시 초기화 (기본)
- 캐릭터별 개별 관리

### 사망 처리
1. HP ≤ 0 도달
2. 해당 캐릭터 행동 불가 상태
3. 해당 캐릭터 덱/에너지 비활성화
4. 부활 메카닉 없음 (기본)

---

## Targeting

### 아군 타겟
- Self: 카드 사용 캐릭터
- SingleAlly: 아군 1명 선택
- AllAllies: 아군 전체

### 적 타겟
- SingleEnemy: 적 1명 선택
- AllEnemies: 적 전체
- RandomEnemy: 랜덤 적 1명

---

## TODO (추후 결정 필요)

- [ ] 기본 드로우 수
- [ ] 기본 에너지 양
- [ ] 상태효과 목록 및 수치
- [ ] 데미지/방어도 공식
